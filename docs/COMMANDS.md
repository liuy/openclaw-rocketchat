[首页](../README.md) · [使用指南](GUIDE.md) · [常见问题](FAQ.md) · [配置参数](CONFIGURATION.md) · [架构](ARCHITECTURE.md) · [安全](SECURITY.md) · [多 Agent](MULTI-AGENT.md) · [多渠道](MULTI-CHANNEL.md) · [命令](COMMANDS.md)

# 命令参考

## 为什么用 `!` 而不是 `/`？

Rocket.Chat 客户端内置了一系列 `/` 斜杠命令（如 `/help`、`/join`、`/leave`、`/mute` 等）。当你输入 `/` 开头的消息时，**Rocket.Chat 客户端会直接拦截**，消息不会发送给 AI 机器人。

为了避免冲突，在 Rocket.Chat 中使用 **`!` 前缀**代替 `/` 来调用 OpenClaw 命令。插件会自动将 `!xxx` 转换为 OpenClaw 的 `/xxx` 命令。

> **重要：** 这些命令是 **OpenClaw 官方内置**的功能，不是本插件额外添加的。本插件只是做了前缀翻译（`!` → `/`），让你在 Rocket.Chat 中也能正常使用它们。

---

## 日常命令

日常使用中最常用的命令：

| 命令格式 | 自然语言格式 | 功能 |
|---------|------------|------|
| `!help` | `命令帮助` `命令列表` `查看命令` | 显示命令帮助菜单 |
| `!reset` | `重置对话` `清空对话` | 清空当前对话的记忆，重新开始 |
| `!new` | `新对话` `开始新对话` | 开始新对话（可指定模型：`!new gpt-5`） |
| `!model` | `切换模型` `模型列表` `查看模型` | 查看可用模型列表或切换当前模型 |
| `!status` | `查看状态` `当前状态` | 显示当前 Agent、模型、会话等运行状态 |
| `!compact` | `压缩对话` `压缩历史` | 压缩对话历史记录，释放上下文窗口空间 |
| `!abort` | `停止回复` `终止回复` | 立即终止当前 AI 正在生成的回复 |

### `!model` 用法示例

```
!model              ← 显示模型列表（带编号）
!model 3            ← 选择列表中第 3 个模型
!model openai/gpt-5 ← 直接指定模型
!model list         ← 显示模型列表
!model status       ← 显示详细的模型/API 配置信息
```

### `!new` 和 `!reset` 的区别

- `!reset` — 清空当前对话，使用当前模型
- `!new` — 开始新对话，可以顺便切换模型（如 `!new gpt-5`）

---

## 进阶命令

适合需要精细控制 AI 行为的用户：

| 命令格式 | 自然语言格式 | 功能 |
|---------|------------|------|
| `!think <级别>` | `思考深度` | 设置 AI 推理深度（off/minimal/low/medium/high） |
| `!agents` | `代理列表` `查看代理` | 查看可用的 Agent 列表 |
| `!agent <id>` | — | 查看或切换到指定 Agent |
| `!usage` | `查看用量` `用量统计` | 显示 token 用量和费用统计 |
| `!context` | `查看上下文` `上下文信息` | 显示上下文大小和构成（system prompt、工具、技能等） |
| `!whoami` | — | 查看你的发送者身份标识 |
| `!commands` | — | 查看 OpenClaw 完整命令列表 |
| `!reasoning <on/off>` | — | 开启/关闭 AI 推理过程的单独输出 |
| `!verbose <on/off>` | — | 开启/关闭调试信息显示 |
| `!usage <级别>` | — | 设置用量显示级别（off/tokens/full/cost） |

### `!think` 级别说明

| 级别 | 说明 |
|------|------|
| `off` | 关闭推理（最快、最省 token） |
| `minimal` | 最少推理 |
| `low` | 较少推理 |
| `medium` | 中等推理（默认） |
| `high` | 深度推理（最慢、最准确） |

> **注意：** `!verbose` 和 `!reasoning` 在群组中使用时要小心，可能会暴露 AI 的内部推理过程给群内所有人。

---

## 管理命令

需要管理员权限或特殊配置才能使用的命令：

| 命令格式 | 功能 |
|---------|------|
| `!elevated <on/off/ask/full>` | 管理权限提升级别 |
| `!exec` | 查看或配置代码执行沙箱行为 |
| `!activation <mention/always>` | 设置群组中的激活模式（@提及/始终响应） |
| `!session` | 查看当前会话信息 |
| `!sessions` | 查看所有会话列表 |
| `!approve <allow-once/deny>` | 审批代码执行请求 |
| `!subagents` | 查看或管理子 Agent |
| `!skill <名称>` | 按名称运行一个技能（Skill） |
| `!config` | 查看或修改持久配置（需要 `commands.config: true`） |
| `!debug` | 运行时调试覆盖（需要 `commands.debug: true`） |

> 管理命令需要发送者在 `commands.allowFrom` 白名单中，或通过渠道访问组授权。未授权的用户发送这些命令会被静默忽略。

---

## 不适用的命令

以下 OpenClaw 命令在 Rocket.Chat 中**不适用或不推荐使用**：

| 命令 | 原因 |
|------|------|
| `!bash` / `! 命令` | 在服务器上执行 shell 命令，安全风险高，默认禁用 |
| `!dock-slack` / `!dock-telegram` | 跨渠道对接命令，仅在对应平台有意义 |
| `!restart` / `!stop` | 控制 Gateway 服务，默认禁用 |
| `!send` | 所有者专用，控制消息发送行为 |
| `!tts` | 语音合成，Rocket.Chat App 不支持 |
| `!queue` | 消息队列高级设置，一般不需要手动调整 |

---

## 使用方式

### 方式一：命令格式

以 `!` 开头，后跟命令名：

```
!reset
!model openai/gpt-5
!think high
!status
```

> **注意：** `!` 必须是消息的**第一个字符**。消息中间出现的感叹号不会被当作命令。
> 例如 `太好了！reset` 不会触发命令。

### 方式二：自然语言格式

直接发送对应的自然语言短语（需完整匹配一条消息）：

```
重置对话
切换模型
查看状态
```

> **注意：** 自然语言必须是**完整的一条消息**，且**完全匹配**上表中的短语。
> 例如 `重置对话` 会触发重置，但 `帮我重置对话` 不会（会被当作普通消息发给 AI）。

### 方式三：自然对话

你当然也可以用自然语言和 AI 对话来达到类似效果：

```
帮我把之前的对话清空，重新开始
```

这条消息会发送给 AI Agent，Agent 可能会理解你的意图并执行操作。

---

## 命令 vs 自然对话

| | 命令（`!reset`） | 自然语言短语（`重置对话`） | 自然对话 |
|--|:---:|:---:|:---:|
| 执行方式 | OpenClaw 直接执行 | 转换为命令后执行 | AI 理解后执行 |
| 速度 | 最快（不经过 AI） | 最快（不经过 AI） | 较慢（需 AI 处理） |
| 准确性 | 100% 精确 | 100% 精确 | 取决于 AI 理解 |
| 适用场景 | 熟悉命令的用户 | 不想记命令的用户 | 复杂的操作请求 |

---

## 在群组中使用

群组中的命令使用与私聊相同。如果群组开启了 `@提及` 模式（`requireMention: true`），你需要先 @机器人 再输入命令：

```
@molty !reset
@molty !model list
@molty !think high
```

在不需要 @提及的群组中，直接发送命令即可。

---

## 扩展性

所有 `!xxx` 都会自动转换为 OpenClaw 的 `/xxx` 命令。如果 OpenClaw 未来新增了命令，你直接用 `!` 前缀就能调用，**无需等待插件更新**。

同样，OpenClaw 的插件（如 OpenProse）注册的自定义命令也可以通过 `!` 前缀在 Rocket.Chat 中使用。
